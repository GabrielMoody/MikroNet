_format_version: "3.0"
_transform: true

services:
  - name: profile_service
    url: http://profile_service:8011
    routes:
      - name: profile_route
        paths:
          - /api/profile
        methods:
          - GET
          - POST
          - PUT
          - PATCH
          - DELETE
        plugins:
          - name: jwt
            config:
              claims_to_verify: ["exp"]
              key_claim_name: "iss"
              secret_is_base64: false
              run_on_preflight: true

  - name: auth_service
    url: http://auth_service:8010
    routes:
      - name: auth_route
        paths:
          - /api/auth
        methods:
          - POST

  - name: owner_service
    url: http://owner_service:8012
    routes:
      - name: owner_route
        paths:
          - /api/owner
        methods:
          - GET
          - POST
          - PATCH
          - PUT
          - DELETE
        plugins:
          - name: jwt
            config:
              claims_to_verify: [ "exp" ]
              key_claim_name: "iss"
              secret_is_base64: false
              run_on_preflight: true

  - name: driver_service
    url: http://driver_service:8013
    routes:
      - name: driver_route
        paths:
          - /api/driver
        methods:
          - GET
          - POST
          - PATCH
          - PUT
          - DELETE
        plugins:
          - name: jwt
            config:
              claims_to_verify: ["exp"]
              key_claim_name: "iss"
              secret_is_base64: false
              run_on_preflight: true

  - name: user_service
    url: http://user_service:8014
    routes:
      - name: user_route
        paths:
          - /api/user
        methods:
          - GET
          - POST
          - PATCH
          - PUT
          - DELETE
        plugins:
          - name: jwt
            config:
              claims_to_verify: ["exp"]
              key_claim_name: "iss"
              secret_is_base64: false
              run_on_preflight: true

  - name: notification_service
    url: http://notificatoin_service:8015
    routes:
      - name: notification_route
        paths:
          - /api/notify
        methods:
          - GET
          - POST
        plugins:
          - name: jwt
            config:
              claims_to_verify: ["exp"]
              key_claim_name: "iss"
              secret_is_base64: false
              run_on_preflight: true

#consumers:
#  - username: my_consumer
#    jwt_secrets:
#      - key: my_consumer_key
#        secret: FV77z4uhQ9M
